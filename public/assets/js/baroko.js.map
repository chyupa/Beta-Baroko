{"version":3,"sources":["baroko.module.js","general.filters.js","cart.factory.js","homepage.factory.js","product.factory.js","homepage.controller.js","product.controller.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"baroko.js","sourcesContent":["(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('baroko.front', [\r\n            'ngAnimate',\r\n            'toastr'\r\n        ])\r\n        .constant('endpoints', {\r\n            BACK: {\r\n                GET_PRODUCTS: 'api/getPublicProducts',\r\n                GET_PRODUCT: 'api/getProduct/',\r\n\r\n                ADD_TO_CART: 'api/addToCart'\r\n            }\r\n        })\r\n        .constant('extensions', {\r\n            SINGLE: {\r\n                METRU: 'metru',\r\n                BUCATA: 'bucata'\r\n            },\r\n            PLURAL: {\r\n                METRU: 'metrii',\r\n                BUCATA: 'bucati'\r\n            }\r\n        });\r\n\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('baroko.front')\r\n        .filter('extension', extension);\r\n\r\n    extension.$inject = ['extensions'];\r\n\r\n    /**\r\n     * Filter for using the right singular/plural product extension\r\n     *\r\n     * @param extensions\r\n     * @returns {Function}\r\n     */\r\n    function extension(extensions) {\r\n\r\n       return function(extension, quantity) {\r\n           if (extension === extensions.SINGLE.BUCATA) {\r\n               switch (quantity) {\r\n                   case 0:\r\n                       return quantity + ' ' + extensions.PLURAL.BUCATA;\r\n                   case 1:\r\n                       return quantity + ' ' + extensions.SINGLE.BUCATA;\r\n                   default:\r\n                       return quantity + ' ' + extensions.PLURAL.BUCATA;\r\n               }\r\n           } else {\r\n               switch (quantity) {\r\n                   case 0:\r\n                       return quantity + ' ' + extensions.PLURAL.METRU;\r\n                   case 1:\r\n                       return quantity + ' ' + extensions.SINGLE.METRU;\r\n                   default:\r\n                       return quantity + ' ' + extensions.PLURAL.METRU;\r\n               }\r\n           }\r\n       }\r\n    }\r\n})();","(function() {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('baroko.front')\r\n        .factory('CartFactory', CartFactory);\r\n\r\n    CartFactory.$inject = ['endpoints', 'toastr', '$http'];\r\n\r\n    function CartFactory(endpoints, toastr, $http) {\r\n        return {\r\n            addToCart: addToCart\r\n        };\r\n\r\n        /**\r\n         * Get product info\r\n         *\r\n         * @param string url\r\n         * @returns {HttpPromise}\r\n         */\r\n        function addToCart(data) {\r\n            return $http.post(endpoints.BACK.ADD_TO_CART, data)\r\n                .then(addToCartComplete)\r\n                .catch(addToCartFailed)\r\n\r\n            /**\r\n             * success callback\r\n             *\r\n             * @param response\r\n             * @returns {*}\r\n             */\r\n            function addToCartComplete(response) {\r\n                return response.data;\r\n            }\r\n\r\n            /**\r\n             * error callback\r\n             *\r\n             * @param response\r\n             */\r\n            function addToCartFailed(response) {\r\n                toastr.error(\"Oops something went wrong!\");\r\n            }\r\n        }\r\n    }\r\n})();","(function() {\r\n   'use strict';\r\n\r\n    angular\r\n        .module('baroko.front')\r\n        .factory('HomePageFactory', HomePageFactory);\r\n\r\n    HomePageFactory.$inject = ['endpoints', '$http', 'toastr'];\r\n\r\n    function HomePageFactory(endpoints, $http, toastr) {\r\n\r\n        return {\r\n            getProducts: getProducts\r\n        };\r\n\r\n        /**\r\n         * Get all products\r\n         *\r\n         * @returns {HttpPromise}\r\n         */\r\n        function getProducts() {\r\n            return $http.get(endpoints.BACK.GET_PRODUCTS)\r\n                .then(getProductsComplete)\r\n                .catch(getProductsFailed);\r\n\r\n            /**\r\n             * Return data\r\n             *\r\n             * @param response\r\n             * @returns {*}\r\n             */\r\n            function getProductsComplete (response) {\r\n                return response.data;\r\n            }\r\n\r\n            /**\r\n             * Show error\r\n             *\r\n             * @param response\r\n             */\r\n            function getProductsFailed (response) {\r\n                toastr.error(\"Get Products Failed because: \" + response.data);\r\n            }\r\n        }\r\n    }\r\n})();","(function() {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('baroko.front')\r\n        .factory('ProductFactory', ProductFactory);\r\n\r\n    ProductFactory.$inject = ['endpoints', 'toastr', '$http'];\r\n\r\n    function ProductFactory(endpoints, toastr, $http) {\r\n        return {\r\n            getProduct: getProduct\r\n        };\r\n\r\n        /**\r\n         * Get product info\r\n         *\r\n         * @param string url\r\n         * @returns {HttpPromise}\r\n         */\r\n        function getProduct(url) {\r\n            return $http.get(endpoints.BACK.GET_PRODUCT + url)\r\n                .then(getProductComplete)\r\n                .catch(getProductFailed)\r\n\r\n            /**\r\n             * success callback\r\n             *\r\n             * @param response\r\n             * @returns {*}\r\n             */\r\n            function getProductComplete(response) {\r\n                return response.data;\r\n            }\r\n\r\n            /**\r\n             * error callback\r\n             *\r\n             * @param response\r\n             */\r\n            function getProductFailed(response) {\r\n                toastr.error(\"Oops something went wrong!\");\r\n            }\r\n        }\r\n    }\r\n})();","(function () {\r\n   'use strict';\r\n\r\n    angular\r\n        .module('baroko.front')\r\n        .controller('HomePageController', HomePageController)\r\n\r\n    HomePageController.$inject = ['toastr', 'HomePageFactory'];\r\n\r\n    function HomePageController(toastr, HomePageFactory) {\r\n        var vm = this;\r\n\r\n        activate();\r\n\r\n        /**\r\n         * Get all products\r\n         *\r\n         * @returns {HttpPromise}\r\n         */\r\n        function getProducts() {\r\n            return HomePageFactory.getProducts()\r\n                .then(function (response) {\r\n                    vm.products = response.products;;\r\n                    toastr.success(response.success);\r\n                })\r\n        }\r\n\r\n        /**\r\n         * activation function\r\n         */\r\n        function activate() {\r\n            getProducts();\r\n        }\r\n    }\r\n})();","(function() {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('baroko.front')\r\n        .controller('ProductController', ProductController);\r\n\r\n    ProductController.$inject = ['toastr', 'ProductFactory', 'CartFactory', '$location'];\r\n\r\n    function ProductController(toastr, ProductFactory, CartFactory, $location) {\r\n        var vm = this;\r\n        vm.submitForm = submitForm;\r\n        vm.addQuantity = addQuantity;\r\n        vm.removeQuantity = removeQuantity;\r\n        vm.quantity = 0;\r\n\r\n        activate();\r\n\r\n        /**\r\n         * Add one unit\r\n         *\r\n         * @returns {number}\r\n         */\r\n        function addQuantity() {\r\n            return ++vm.quantity;\r\n        }\r\n\r\n        /**\r\n         * Remove one unit\r\n         *\r\n         * @returns {number}\r\n         */\r\n        function removeQuantity() {\r\n            return --vm.quantity;\r\n        }\r\n\r\n        /**\r\n         * Get product info\r\n         *\r\n         * @returns {HttpPromise}\r\n         */\r\n        function getProductInfo() {\r\n            return ProductFactory.getProduct(getSlugFromUrl())\r\n                .then(function(response) {\r\n                    vm.product = response.product;\r\n                });\r\n        }\r\n\r\n        function submitForm() {\r\n\r\n            /**\r\n             * send this object to backend in order to save in DB\r\n             * we also send the price since the price might change and it is best to save this value for the order\r\n             *\r\n             * @type {{url: string, quantity: number, price: number}}\r\n             */\r\n            var data = {\r\n                url: getSlugFromUrl(),\r\n                quantity: vm.quantity,\r\n                price: vm.product.prices.price\r\n            };\r\n\r\n            /**\r\n             * call backend to add to cart\r\n             */\r\n            return CartFactory.addToCart(data)\r\n                .then(function (response) {\r\n                    toastr.success(response.success);\r\n                });\r\n        }\r\n\r\n        /**\r\n         * activate controller\r\n         */\r\n        function activate() {\r\n            toastr.success('ProductController activated');\r\n\r\n            getProductInfo();\r\n        }\r\n\r\n        /**\r\n         * helper function for getting the slug\r\n         *\r\n         * @returns {string}\r\n         */\r\n        function getSlugFromUrl() {\r\n            return $location.absUrl().split('/').pop();\r\n        }\r\n    }\r\n})();"],"sourceRoot":"/source/"}